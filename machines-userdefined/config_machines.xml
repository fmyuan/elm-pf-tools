<?xml version="1.0"?>
<config_machines>
   <machine MACH="mymac">
      <!-- customize these fields as appropriate for your system (max tasks) and
           desired layout (change '${HOME}/projects' to your
           prefered location). -->
      <DESC>userdefined Mac OS system and environmental settings</DESC>
      <OS>Darwin</OS>
      <COMPILERS>gnu</COMPILERS>
      <MPILIBS>mpich,mpi-serial</MPILIBS>
      <RUNDIR>/lustre/pfs1/cades-ccsi/scratch/acme_simulations/$CASE/run</RUNDIR>
      <EXEROOT>/lustre/pfs1/cades-ccsi/scratch/acme_simulations/$CASE/bld</EXEROOT>
      <DIN_LOC_ROOT>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/cesm-inputdata</DIN_LOC_ROOT>
      <DIN_LOC_ROOT_CLMFORC>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/cesm-inputdata/atm/datm7</DIN_LOC_ROOT_CLMFORC>
      <DOUT_S_ROOT>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/archives/$CASE</DOUT_S_ROOT>
      <DOUT_L_MSROOT>csm/$CASE</DOUT_L_MSROOT>
      <CESMSCRATCHROOT>/lustre/pfs1/cades-ccsi/scratch</CESMSCRATCHROOT>
      <CCSM_BASELINE>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/baselines</CCSM_BASELINE>
      <CCSM_CPRNC>$CIMEROOT/tools/cprnc/build/cprnc</CCSM_CPRNC>
      <BATCHQUERY></BATCHQUERY>
      <BATCHSUBMIT></BATCHSUBMIT>
      <BATCHREDIRECT></BATCHREDIRECT>
      <SUPPORTED_BY>Fengming Yuan</SUPPORTED_BY>
      <GMAKE_J>1</GMAKE_J>
      <MAX_TASKS_PER_NODE>1</MAX_TASKS_PER_NODE>
      <PES_PER_NODE>1</PES_PER_NODE>
      <batch_system type="none" version="x.y">
        <queues></queues>
        <walltimes></walltimes>
      </batch_system>
      <mpirun mpilib="mpich">
        <executable>/usr/local/mpich-3.2-gcc53/bin/mpirun</executable>
        <arguments><arg name="num_tasks"> -np {{ num_tasks }}</arg></arguments>
      </mpirun>
   </machine>

   <machine MACH="cades">
      <!-- customize these fields as appropriate for your system (max tasks) and
                      desired layout (change '$group/$USER' to your
           prefered location). -->
      <DESC> OR-CONDO, CADES-CCSI, os is Linux, 32 pes/nodes, batch system is PBS</DESC>
      <NODENAME_REGEX>cades</NODENAME_REGEX>
      <TESTS>acme_developer</TESTS>
      <OS>LINUX</OS>
      <COMPILERS>gnu,intel</COMPILERS>
      <MPILIBS>openmpi,mpi-serial</MPILIBS>
      <RUNDIR>/lustre/pfs1/cades-ccsi/scratch/$CCSMUSER/$CASE/run</RUNDIR>
      <EXEROOT>/lustre/pfs1/cades-ccsi/scratch/$CCSMUSER/$CASE/bld</EXEROOT>
      <DIN_LOC_ROOT>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/ACME_inputdata</DIN_LOC_ROOT>
      <DIN_LOC_ROOT_CLMFORC>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/ACME_inputdata/atm/datm7</DIN_LOC_ROOT_CLMFORC>
      <DOUT_S_ROOT>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/archives/$CASE</DOUT_S_ROOT>
      <DOUT_L_MSROOT>csm/$CASE</DOUT_L_MSROOT>
      <CESMSCRATCHROOT>/lustre/pfs1/cades-ccsi/scratch/$CCSMUSER</CESMSCRATCHROOT>
      <CCSM_BASELINE>/lustre/pfs1/cades-ccsi/proj-shared/project_acme/baselines</CCSM_BASELINE>
      <CCSM_CPRNC>$CIMEROOT/tools/cprnc/build/cprnc</CCSM_CPRNC>
      <BATCHQUERY>/opt/torque/bin/qstat -f </BATCHQUERY>
      <BATCHSUBMIT>/opt/torque/bin/qsub </BATCHSUBMIT>
      <BATCHREDIRECT></BATCHREDIRECT>
      <SUPPORTED_BY>Fengming Yuan</SUPPORTED_BY>
      <GMAKE_J>4</GMAKE_J>
      <MAX_TASKS_PER_NODE>32</MAX_TASKS_PER_NODE>
      <PES_PER_NODE>1</PES_PER_NODE>
      <module_system type="module">
        <init_path lang="perl">/usr/share/Modules/init/perl.pm</init_path>
        <init_path lang="sh">/usr/share/Modules/init/sh</init_path>
        <init_path lang="csh">/usr/share/Modules/init/csh</init_path>
        <modules>
          <command name="rm">PE-intel</command>
          <command name="rm">PE-pgi</command>
          <command name="rm">PE-gnu</command>
          <command name="rm">hdf5</command>
          <command name="rm">netcdf</command>
          <command name="rm">hdf5-parallel</command>
          <command name="rm">netcdf-hdf5parallel</command>
        </modules>
        <modules compiler="intel">
          <command name="load">PE-intel</command>
        </modules>
        <modules compiler="gnu">
          <command name="load">PE-gnu</command>
        </modules>
        <modules mpilib="mpi-serial">
          <command name="load">hdf5/1.8.17</command>
          <command name="load">netcdf/4.3.3.1</command>
        </modules>
        <modules mpilib="!mpi-serial">
          <command name="load">netcdf-hdf5parallel/4.3.3.1</command>
          <command name="load">hdf5-parallel/1.8.17</command>
        </modules>
        <modules>
          <command name="load">xalt/0.7.5</command>
          <command name="load">mkl/2017</command>
          <command name="load">cmake/3.6.1</command>
        </modules>
      </module_system>
      <batch_system type="pbs" version="x.y">
        <queues></queues>
        <walltimes> <walltime default="true">1:00:00</walltime> </walltimes>
      </batch_system>
      <mpirun mpilib="openmpi" compiler="gnu">
        <executable>mpirun</executable>
        <arguments>
          <arg name="num_tasks"> -np {{ num_tasks }}</arg>
        </arguments>
      </mpirun>
        <mpirun mpilib = "mpi-serial">
        <executable> </executable>
      </mpirun>
  </machine>
 
  <default_run_suffix>
      <default_run_exe>$config{'EXEROOT'}/cesm.exe </default_run_exe>
      <default_run_misc_suffix> >> cesm.log.$LID 2>&amp;1 </default_run_misc_suffix>
  </default_run_suffix>

</config_machines>


